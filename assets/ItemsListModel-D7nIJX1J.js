import{f as E,s as N,p as M,q as x,h as _,l as $,v as z,o as l,c as a,d as i,w as g,x as D,F as V,r as m,k as j,m as v,g as F,a as u,t as h,e as q,u as A,y as G,_ as H}from"./index-BplC5l2S.js";const R={key:0,class:"text-center font-weight-bold",style:{"font-size":"x-large"}},K={key:1,class:"mt-4 d-sm-flex justify-sm-end"},Q={key:2,class:"div-container mt-10"},W=["id"],X={class:"position-relative"},Y={key:0,class:"badge"},Z={class:"ml-3 ml-sm-0 w-100"},ee={style:{"font-size":"large"}},te=E({__name:"ItemsListModel",props:{modelValue:{}},emits:["update:modelValue"],setup(w,{emit:k}){const I=w,L=k,{token:S}=N(M()),{ListItem:f}=N(x()),{setItem:y}=x(),d=_(I.modelValue),r=_(!1),p=_(!1);$(()=>{setTimeout(()=>{r.value=!0},300)});function b(){p.value=!0,d.value.forEach(t=>t.count=0)}function P(t){if(t.count===0){const o=JSON.parse(f.value).filter(c=>c.PNum!==t.PNum),n=JSON.stringify(o);y(n)}else{const e=JSON.parse(f.value),o=e.find(c=>c.PNum==t.PNum);o?o.count=t.count:e.push(t);const n=JSON.stringify(e);y(n)}}function C(){JSON.parse(f.value).forEach(e=>{const o=d.value.find(n=>n.PNum==e.PNum);o&&(o.count=e.count)})}C();function J(t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}return z(()=>d.value,t=>{L("update:modelValue",t)}),(t,e)=>{const o=m("v-autocomplete"),n=m("v-img"),c=m("v-label"),O=m("v-number-input"),T=m("v-dialog");return l(),a(V,null,[i(D,{name:"fade-slide"},{default:g(()=>[r.value?(l(),a("div",R,[j(t.$slots,"title",{},void 0,!0)])):v("",!0),r.value?(l(),a("div",K,[i(o,{"max-width":t.$vuetify.display.smAndUp?"200px":"",density:"compact",variant:"solo-filled",placeholder:"搜尋",items:d.value,"item-title":"productName","item-value":"PNum","onUpdate:modelValue":J},null,8,["max-width","items"])])):v("",!0),r.value?(l(),a("div",Q,[(l(!0),a(V,null,F(d.value,(s,U)=>(l(),a("div",{class:"d-flex flex-sm-column",key:U,id:s.PNum},[u("div",X,[i(n,{width:t.$vuetify.display.xs?"80px":"",src:s.img},null,8,["width","src"]),s.count?(l(),a("div",Y,h(s.count),1)):v("",!0)]),u("div",Z,[i(c,{class:"d-block d-sm-inline",style:{"font-size":"larger"}},{default:g(()=>[q(h(s.productName),1)]),_:2},1024),u("div",null,[u("div",ee,[e[2]||(e[2]=u("span",null,"售價: ",-1)),u("span",null,h(s.price)+"元",1)]),i(O,{modelValue:s.count,"onUpdate:modelValue":[B=>s.count=B,()=>A(S)?P(s):b()],min:0,max:99,class:"d-flex justify-end d-sm-block mt-sm-3",density:"compact",variant:"outlined","control-variant":"split",inset:""},null,8,["modelValue","onUpdate:modelValue"])])])],8,W))),128))])):v("",!0)]),_:3}),i(T,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),"max-width":"400px",persistent:"",transition:"slide-x-transition"},{default:g(()=>[i(G,{onModelValue:e[0]||(e[0]=s=>p.value=s)})]),_:1},8,["modelValue"])],64)}}}),oe=H(te,[["__scopeId","data-v-5d64cf32"]]);export{oe as I};
