import{_ as P}from"./NumberTextBox.vue_vue_type_script_setup_true_lang-DBmDPaEb.js";import{f as h,s as S,x as j,h as C,r as a,o as u,c as g,u as p,b as N,d as s,w as i,y as D,F as L,p as V,a as e,e as k,g as F,t as b,_ as M}from"./index-C2clxMlZ.js";const T=h({__name:"OrderBtn",props:{product:{},size:{default:"default"},color:{default:"blue"},variant:{default:()=>{}}},setup(O){const{token:v}=S(j()),f=C();return(d,r)=>{var y;const x=a("v-btn"),w=a("v-dialog");return u(),g(L,null,[p(v)?(u(),N(x,{key:0,size:d.size,rounded:"pill",color:d.color,variant:d.variant,text:"送出訂單"},null,8,["size","color","variant"])):(u(),N(x,{key:1,ref_key:"btn",ref:f,size:d.size,rounded:"pill",color:d.color,variant:d.variant,text:"送出訂單"},null,8,["size","color","variant"])),s(w,{activator:(y=f.value)==null?void 0:y.$el,"max-width":"400px",persistent:"",transition:"slide-x-transition"},{default:i(({isActive:l})=>[s(D,{onModelValue:t=>l.value=t},null,8,["onModelValue"])]),_:1},8,["activator"])],64)}}}),U={class:"d-flex flex-column mt-5 list-container"},E={key:0,class:"text-center"},R={class:"ml-3",style:{width:"100%"}},q={class:"font-weight-bold",style:{"font-size":"large"}},A={class:"d-flex flex-row align-center justify-space-between"},G={class:"text-end"},H={class:"d-flex justify-end"},K={class:"detail-container"},Q={class:"d-flex"},W={class:"d-flex font-weight-bold",style:{"font-size":"larger",color:"red"}},X={class:"d-flex w-100 justify-end mt-4"},Y=h({__name:"CartView",setup(O){const{ListItem:v}=S(V()),{setItem:f,clearList:d}=V();let r=C(JSON.parse(v.value));function x(l){if(l.count===0)r.value.map(t=>t.count=1);else{const t=JSON.parse(v.value),n=t.find(m=>m.PNum==l.PNum);n?n.count=l.count:t.push(l);const _=JSON.stringify(t);f(_)}}function w(l){const n=JSON.parse(v.value).filter(m=>m.PNum!==l.PNum),_=JSON.stringify(n);f(_),r.value=n}function y(){d(),r.value=[]}return(l,t)=>{const n=a("v-col"),_=a("v-label"),m=a("v-img"),$=a("v-icon"),B=a("v-divider"),I=a("v-btn"),J=a("v-row");return u(),N(J,null,{default:i(()=>[s(n,{cols:"12"},{default:i(()=>t[1]||(t[1]=[e("div",{class:"text-h5 font-weight-bold text-center",style:{width:"100%"}},"購物清單",-1)])),_:1}),s(n,{cols:"12"},{default:i(()=>[e("div",U,[p(r).length===0?(u(),g("div",E,[s(_,null,{default:i(()=>t[2]||(t[2]=[k("----------您目前沒有商品唷----------")])),_:1})])):(u(!0),g(L,{key:1},F(p(r),(o,c)=>(u(),g("div",{key:c,class:"d-flex mb-5 pa-3 list-item",style:{"border-bottom":"1px rgba(0, 0, 0, 0.2) dotted"}},[s(m,{width:"70px",src:o.img},null,8,["src"]),e("div",R,[e("div",q,b(o.productName),1),e("div",A,[s(P,{modelValue:o.count,"onUpdate:modelValue":[z=>o.count=z,()=>x(o)],offset:1},null,8,["modelValue","onUpdate:modelValue"]),s($,{style:{"background-color":"red","border-radius":"50%","font-size":"medium",color:"white"},onClick:z=>w(o)},{default:i(()=>t[3]||(t[3]=[k("mdi-minus")])),_:2},1032,["onClick"])]),e("div",G,b(o.price*o.count)+"元",1)])]))),128))])]),_:1}),s(n,{cols:"12"},{default:i(()=>[s(B,{class:"ma-10 mt-3 ml-0 mr-0",opacity:"0.4"})]),_:1}),s(n,{cols:"12"},{default:i(()=>[e("div",H,[e("div",K,[e("div",Q,[t[4]||(t[4]=e("div",{class:"mr-auto",style:{"font-size":"medium"}},"商品總金額:",-1)),e("div",null,b(p(r).reduce((o,c)=>o+c.price*c.count,0))+" 元",1)]),t[7]||(t[7]=e("div",{class:"d-flex"},[e("div",{class:"mr-auto",style:{"font-size":"medium"}},"打折優惠:"),e("div",null,"6折")],-1)),t[8]||(t[8]=e("div",{class:"d-flex"},[e("div",{class:"mr-auto",style:{"font-size":"medium"}},"運費:"),e("div",null,"30元")],-1)),e("div",W,[t[5]||(t[5]=e("div",{class:"mr-auto"},"應付金額:",-1)),e("div",null,b(p(r).reduce((o,c)=>o+c.price*c.count,0)*.6+30)+"元 ",1)]),e("div",X,[s(I,{class:"mr-2",rounded:"pill",color:"error",onClick:t[0]||(t[0]=o=>y())},{default:i(()=>t[6]||(t[6]=[k("清除訂單")])),_:1}),s(T)])])])]),_:1})]),_:1})}}}),et=M(Y,[["__scopeId","data-v-167cabba"]]);export{et as default};
